<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity3">
<head th:include="~{fragments :: head}">
    <title id="pageTitle">Reports</title>
</head>
<body>

<div th:replace="~{fragments :: logo}"></div>
<div>
    <div class="top-title"><h1>Reports Data</h1></div>

    <div class="text-center my-4"><a class="delete-btn" href="/report/dashboard">Dashboard</a></div>

    <!--/*@thymesVar id="message" type="com"*/-->
    <div class="d-flex p-2 flex-row justify-content-center">
        <span class="message-success" th:text="${message}"></span>
    </div>
    <div class="container">

        <div class="row">

            <!--FILTER AND SEARCH FORM-->

            <form method="get"
                  th:action="@{/report/table/search}">
<!--                {id}(id=${report.id})-->
                <!--/*@thymesVar id="key" type="com"*/-->
                <select class="form-control col-6" th:field="${key}">
                    <option value="0">select</option>
                    <option th:each="s : ${filterList}" th:text="${s}" th:value="${s}"> test</option>

                </select>
                <!--/*@thymesVar id="filterList" type="com"*/-->

                <div class="col-md-3">

                    <!--/*@thymesVar id="search" type="com"*/-->
                    <input type="text" th:field="${search}">
                </div>

                <button type="submit"> search</button>

            </form>
        </div>

    </div>
    <!--TABLE-->
    <div class="d-flex p-2 flex-row justify-content-center">
        <!--/*@thymesVar id="reports" type="com.nci.webapp"*/-->
        <div class="row d-flex">
            <div class="table-wrap scrollable">
                <table class="table table-hover table-bordered table-striped">
                    <thead class="text-center table-bordered tophead">
                    <tr class="thead-hover">
                        <th sec:authorize="hasAnyAuthority('ADMIN')">User</th>
                        <th>Report ID</th>


                        <th class="px-5 mx-3">Report Date</th>
                        <th>Day Rating</th>
                        <th class="px-5">Medication</th>
                        <th class="px-5">Side Effects</th>

                        <th sec:authorize="hasAnyAuthority('USER')">Edit</th>

                    </tr>
                    </thead>
                    <tbody>
                    <tr th:each="report : ${reports}" class="text-center">
                        <td sec:authorize="hasAnyAuthority('ADMIN')" th:text="${report.user.username}">User</td>
                        <td th:text="${report.id}">id</td>
                        <!--/*@thymesVar id="date" type="com.nci.webapp"*/-->
                        <td th:text="${#temporals.format(report.date, 'dd/MM/yyyy')}">17/04/1945</td>
                        <td th:text="${report.dayClassification}">Day Rating</td>
                        <td th:text="${report.drug}">Drugs</td>
                        <td th:text="${report.sideEffects}">Side Effects</td>

                        <td sec:authorize="hasAnyAuthority('USER')"><a th:href="@{/report/edit/{id}(id=${report.id})}"
                                                                       class="btn btn-primary update-btn">Update</a>
                            <a th:href="@{/report/delete/{id}(id=${report.id})}" class="btn delete-btn btn-danger">Delete</a>
                        </td>

                    </tr>
                    </tbody>

                </table>
            </div>
        </div>
    </div>

</div>


</body>
<footer th:replace="~{fragments :: footer}"></footer>

</html>